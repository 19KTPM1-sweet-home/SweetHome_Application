<html lang='en'>
<head>
  <meta charset='UTF-8' />
  <meta http-equiv='X-UA-Compatible' content='IE=edge' />
  <meta name='viewport' content='width=device-width, initial-scale=1.0' />
  <title>Forgot Password</title>
  <link
    href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css'
    rel='stylesheet'
    integrity='sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3'
    crossorigin='anonymous'
  />
  <link rel='stylesheet' href='../../../stylesheets/app.css' />
  <link rel='stylesheet' href='../../../stylesheets/app.css' />
  <link
    rel='stylesheet'
    href='../../../fontawesome/fontawesome-free-5.15.1-web/css/all.min.css'
  />
  <!-- https://fontawesome.com/ -->
  <link
    rel='stylesheet'
    href='../../../fontawesome/fontawesome-free-5.15.1-web/css/fontawesome.css'
  />
  <!-- https://fontawesome.com/ -->
  <link
    href='https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap'
    rel='stylesheet'
  />
  <!-- https://fonts.google.com/ -->
  <link rel='stylesheet' href='../../stylesheets/bootstrap.min.css' />
  <link
    href='https://fonts.googleapis.com/css?family=Pacifico'
    rel='stylesheet'
  />
    <link rel="icon" type="image/x-icon" href="https://res.cloudinary.com/djoa3bsdd/image/upload/v1641637510/samples/favicon_f8kkbk.ico">
</head>
<body>
<div class='body-sent-email m-0'>
  <div class='container-sent-email'>
    <div class= 'sign-in-container'>
      <div class='form-container'>
      <span class="cant-login">Can't login?</span>
      
      <img src="../../../images/email.svg" alt="email-icon">
      <div class="message">
      <p>We sent a recovery link to you at <span class="email">{{email}}</span></p>
      </div>
      <div class="control">
        <a href="/login/forgot-password">
      <button class="back-btn">Back</button>
        </a>
      <button class="resend-btn">Resend</button>
      </div>

    </div>
    </div>
    
    <div class='overlay-container'>
      <div class='overlay'>
        <div class='overlay-panel overlay-right'>
          <h1>Sweet Home</h1>
          <p>You have to reset your password by your email account. Back to sign in?</p>
          <a href='/login'>
            <button class='ghost' id='signUp'>Sign in</button>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<form method='POST' action='/login/forgot-password'></form>
</body>
<script>
  function post(path, params, method='post') {
    // The rest of this code assumes you are not using a library.
    // It can be made less verbose if you use one.
    const form = document.createElement('form');
    form.method = method;
    form.action = path;

    for (const key in params) {
      if (params.hasOwnProperty(key)) {
        const hiddenField = document.createElement('input');
        hiddenField.type = 'hidden';
        hiddenField.name = key;
        hiddenField.value = params[key];

        form.appendChild(hiddenField);
      }
    }
    document.body.appendChild(form);
    form.submit();
  }

  const resendBtn = document.querySelector('.resend-btn');
  
  resendBtn.addEventListener('click', function(e) {
    const queryString = window.location.search;
    const searchParams = new URLSearchParams(queryString);
    const email = searchParams.get('email');
    const params = {email:email};
    post('/login/forgot-password',params);
}
  );
</script>
</html>